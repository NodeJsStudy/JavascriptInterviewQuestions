# 실행 컨텍스트(Execution Context)

Javascript에서 코드 실행 환겨응ㄹ 관리하는 핵심 메커니즘이다. 이는 코드 실행에 필요한 모든 정보(변수, 함수, Scope Chain 등)을 구조화하여 저장하며, 콜 스택을 통해 실행 순서를 제어한다.

## 실행 컨텍스트 구성 요소

### 1. 메모리 컴포넌트
- 변수 객체 : 선언된 변수/함수를 저장한다.
  - `var` : `undefined`로 초기화
  - `let` / `const` : 초기화하지 않는다.
- 함수 선언 : 전체 함수 코드를 저장한다.
- Scope Chain : 외부 환경을 참조한다.

### 2. 코드 컴포넌트
코드를 한 줄씩 실행하는 실행 스레드이다. 이는 실행 순서를 제어하며 값 할당의 부분을 관리한다.

```
console.log(a) // undefined (생성 단계에서 var 호이스팅)
var a = 5; // 실행 단계에서 값 할당
function test() {
    console.log('start') // 함수 전체 저장
}
```

## 실행 컨텍스트 생명 주기

### 1. 생성 단계
- 변수/함수 선언 수집
- Scope Chain 형성 : Lexical 환경 기반 연결
- this 바인딩


### 2. 실행 단계
- 변수에 실제 값 할당
- 함수 호출 시 새 실행 컨텍스트 생성
- 코드 라인별 실행


## 실행 컨텍스트 유형

### 전역 실행 컨텍스트

최초 생성되는 기본 컨텍스트로 전역변수를 `window` 객체에 바인딩 된다.

### 함수 실행 컨텍스트

함수 호출시마다 새로 생성되어 매개변수, 지역 변수 등을 저장한다.

```
function calculate(x) {
    let y = x * 2;
    return y;
}
caculate(5);
```

## 실행 컨텍스트 동작 원리

1. 전역 실행 컨텍스트 스택 추가 : 코드를 스캔한다.
2. 함소 호출 시 함수 실행 컨텍스트 생성 후 스택의 최상단에 추가한다.
3. 함수 실행 완료 후 스택에서 제거한다.
4. 위와 같은 방식(LIFO) 코드를 스캔하여 처리한다.


```
function first() { second(); }
function second() { third(); }
function third() { console.log('최종'); }
first()
```

```
실생 순서
1. 전역 실행 컨텍스트
2. first() 함수 실행 컨텍스트
3. second() 함수 실행 컨텍스트
4. third() 함수 실행 컨텍스트
```

위 순서대로 쌓인 후 순차적으로 제거됩니다.

## 활용 사안

콜 스택 추척을 통해 에러 발생 지점 확인을 수행할 ㅜㅅ 있고 이를 이용해 비동기 처리, 스코프 관리, 메모리 누수 방지를 수행할 수 있다.